# 荔枝霜疫霉预警等级阈值模型分析（基于新预警标准）

## 数据说明

**气象因子数据**: 样本数据_验证修复.xlsx（包含19-25年采集的数据，预警列和气象因子）

**目标变量**: 预警等级（直接使用数据文件中的'预警'列：0-3级预警等级）

**样本筛选**: 仅保留预警列中有效的预警等级（0-3级），排除预警为"未定义"的样本和无法识别的数据

**有效样本数**: 57 条（训练 44，2025 年验证 13）

**预警等级分布**：

- 0级（不发生）: 14 条
- 1级（轻度）: 13 条
- 2级（中度）: 21 条
- 3级（重度）: 9 条

**重要说明**: 本批次实验**直接使用数据文件中的'预警'列**，使用**7天特征集合**（平均气温、日均降雨量、平均相对湿度、累积降雨时数、累积日照时数）。训练时保留0-3级全部样本，但展示时仅输出1-3级（轻/中/重）预警规则。**强制使用'7天日均降雨量'作为根节点（第一个判断条件），深度1强制使用'7天平均气温'作为区分节点**，其他子节点使用所有特征进行详细划分。

## 三种推荐方案参数

| 方案 | 参数组合 | max_depth | min_samples_leaf | 综合评分 | 训练准确率（总体准确率） | 覆盖样本数 | 2025验证准确率 |
|------|---------|-----------|------------------|----------|------------------------|-----------|----------------|
| **方案一** | depth4_leaf1 | 4 | 1 | **26.00** | **74.3%** | **35** | **69.2% (9/13)** |
| **方案二** | depth8_leaf1 | 8 | 1 | **35.00** | **100.0%** | **35** | **46.2% (6/13)** |
| **方案三** | depth3_leaf1 | 3 | 1 | **18.00** | **60.0%** | **30** | **69.2% (9/13)** |

## 0级（不发生）预警规则

**说明**: 0级样本在训练阶段保留，用于稳定树结构；业务输出仅聚焦 **1-3 级（轻/中/重）**。下文阈值主要来自**方案一（depth4_leaf1，平衡方案）**，该方案训练准确率74.3%，验证准确率69.2%，综合评分26.0，覆盖样本数35个，各项指标均衡。方案二（depth8_leaf1）训练准确率100%，覆盖样本数35个，综合评分最高（35.0），但验证准确率较低（46.2%）。方案三（depth3_leaf1）验证准确率最高（69.2%，9/13），综合评分18.0，覆盖样本数30个，适合强调验证表现的场景。所有方案均强制使用**7天日均降雨量**作为根节点（第一个判断条件），深度1强制使用**7天平均气温**作为区分节点，其他子节点使用所有特征进行详细划分。其他方案请查阅对应子目录的 `1120.md`。

## 1级（轻度）预警规则

### 方案一：平衡方案 (depth4_leaf1)

**规则1（覆盖样本=3，准确率=100%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 > 19.614 且 7天累积日照时数 ≤ 30.100 且 7天日均降雨量 ≤ 0.743

类别分布: {1: 3}

**规则2（覆盖样本=1，准确率=100%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 ≤ 19.614 且 7天日均降雨量 ≤ 2.771

类别分布: {1: 1}

**规则3（覆盖样本=5，准确率=80%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 > 19.614 且 7天累积日照时数 > 30.100 且 7天累积日照时数 > 32.900

类别分布: {1: 4, 3: 1}

**最优规则**: 规则1（samples=3，准确率=1.000，score=3.00）

**关键气象条件**:
- **7天日均降雨量 > 0mm 且 ≤ 0.743mm**（根节点，核心条件，表示有小雨）
- **7天平均气温 > 19.614℃**（深度1节点，区分条件）
- **7天累积日照时数 ≤ 30.1小时**（区分条件，表示日照适中）

### 方案二：综合评分更高方案 (depth8_leaf1)

**规则1-9（覆盖样本各=1-2，准确率=100%）**：

共9条规则，覆盖9个1级样本，准确率均为100%，规则条件更细致，涉及多个特征的精细划分。

**最优规则**: 规则1（samples=2，准确率=1.000，score=2.00）

**关键气象条件**:
- **7天日均降雨量 > 0mm**（根节点，核心条件）
- **7天平均气温**（深度1节点，区分条件，阈值19.614℃）
- **7天累积日照时数**（区分条件，阈值30.1小时、32.9小时）
- **7天累积降雨时数**（区分条件，阈值23.0小时）
- **7天平均相对湿度**（区分条件，阈值86.571%）

### 方案三：验证准确率更高方案 (depth3_leaf1)

**规则1（覆盖样本=1，准确率=100%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 ≤ 19.614 且 7天日均降雨量 ≤ 2.771

类别分布: {1: 1}

**最优规则**: 规则1（samples=1，准确率=1.000，score=1.00）

**关键气象条件**:
- **7天日均降雨量 > 0mm 且 ≤ 2.771mm**（根节点，核心条件）
- **7天平均气温 ≤ 19.614℃**（深度1节点，区分条件）

### 1级预警规则总结

| 方案 | 规则数 | 最优规则准确率 | 最优规则覆盖样本 | 使用的关键特征 |
|------|--------|---------------|-----------------|---------------|
| 方案一 (depth4_leaf1) | 3 | 100% | 3 | 7天日均降雨量（根节点）、7天平均气温（深度1）、7天累积日照时数 |
| 方案二 (depth8_leaf1) | 9 | 100% | 2 | 7天日均降雨量、7天平均气温、7天累积日照时数、7天累积降雨时数、7天平均相对湿度 |
| 方案三 (depth3_leaf1) | 1 | 100% | 1 | 7天日均降雨量、7天平均气温 |

**解读**: 
- **方案一**：1级预警主要出现在7天日均降雨量 ≤ 0.743mm且温度 > 19.614℃的情况下。规则简洁、易落地。
- **方案二**：使用9条规则覆盖9个1级样本，准确率均为100%，但条件较复杂，需要同时关注多个特征。
- **方案三**：规则最简洁，仅使用根节点和深度1节点的两个特征，适合快速判断。

## 2级（中度）预警规则

### 方案一：平衡方案 (depth4_leaf1)

**规则1（覆盖样本=23，准确率=65.2%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 > 19.614 且 7天累积日照时数 ≤ 30.100 且 7天日均降雨量 > 0.743

类别分布: {1: 3, 2: 15, 3: 5}

**最优规则**: 7天日均降雨量 > 0.743mm 且 7天平均气温 > 19.614℃ 且 7天累积日照时数 ≤ 30.1小时（samples=23，准确率=0.652，score=15.00）

**关键气象条件**:
- **7天日均降雨量 > 0.743mm**（根节点，核心条件）
- **7天平均气温 > 19.614℃**（深度1节点，区分条件）
- **7天累积日照时数 ≤ 30.1小时**（区分条件，区分中度与其他等级）

### 方案二：综合评分更高方案 (depth8_leaf1)

**规则1（覆盖样本=6，准确率=100%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 > 19.614 且 7天累积日照时数 ≤ 30.100 且 7天日均降雨量 > 0.743 且 7天累积降雨时数 ≤ 23.000 且 7天累积降雨时数 ≤ 18.000 且 7天平均气温 > 20.014 且 7天平均气温 > 20.143

类别分布: {2: 6}

**规则2-9（覆盖样本各=1-2，准确率=100%）**：

共9条规则，覆盖15个2级样本，准确率均为100%，规则条件较复杂，涉及多个特征的精细划分。

**最优规则**: 规则1（samples=6，准确率=1.000，score=6.00）

**关键气象条件**:
- **7天日均降雨量 > 0.743mm**（根节点，核心条件）
- **7天平均气温 > 19.614℃**（深度1节点，区分条件）
- **7天累积日照时数**（区分条件，阈值30.1小时）
- **7天累积降雨时数**（区分条件，阈值18.0小时、23.0小时）
- **7天平均气温**（区分条件，多个阈值）

### 方案三：验证准确率更高方案 (depth3_leaf1)

**规则1（覆盖样本=26，准确率=57.7%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 > 19.614 且 7天累积日照时数 ≤ 30.100

类别分布: {1: 6, 2: 15, 3: 5}

**最优规则**: 7天日均降雨量 > 0mm 且 7天平均气温 > 19.614℃ 且 7天累积日照时数 ≤ 30.1小时（samples=26，准确率=0.577，score=15.00）

**关键气象条件**:
- **7天日均降雨量 > 0mm**（根节点，核心条件）
- **7天平均气温 > 19.614℃**（深度1节点，区分条件）
- **7天累积日照时数 ≤ 30.1小时**（区分条件）

### 2级预警规则总结

| 方案 | 规则数 | 最优规则准确率 | 最优规则覆盖样本 | 使用的关键特征 |
|------|--------|---------------|-----------------|---------------|
| 方案一 (depth4_leaf1) | 1 | 65.2% | 23 | 7天日均降雨量、7天平均气温、7天累积日照时数 |
| 方案二 (depth8_leaf1) | 9 | 100% | 6 | 7天日均降雨量、7天平均气温、7天累积日照时数、7天累积降雨时数、7天平均相对湿度 |
| 方案三 (depth3_leaf1) | 1 | 57.7% | 26 | 7天日均降雨量、7天平均气温、7天累积日照时数 |

**解读**: 
- **方案一**：2级预警主要出现在有明显降雨（>0.743mm）且日照处于≤30.1小时的区间，既能覆盖 23 条样本，也保持 65.2% 的准确率，兼顾覆盖与精度。
- **方案二**：规则最细致，9条规则全部 100% 准确率，但覆盖样本较少，需要较多条件才能触发。
- **方案三**：规则最简单，仅使用根节点、深度1节点和日照时数三个条件，覆盖 26 条样本，虽然准确率只有 57.7%，但验证集表现最好（69.2%）。

## 3级（重度）预警规则

### 方案一：平衡方案 (depth4_leaf1)

**规则1（覆盖样本=2，准确率=100%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 ≤ 19.614 且 7天日均降雨量 > 2.771 且 7天平均气温 > 16.343

类别分布: {3: 2}

**规则2（覆盖样本=1，准确率=100%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 ≤ 19.614 且 7天日均降雨量 > 2.771 且 7天平均气温 ≤ 16.343

类别分布: {3: 1}

**最优规则**: 规则1（samples=2，准确率=1.000，score=2.00）

**关键气象条件**:
- **7天日均降雨量 > 2.771mm**（根节点，核心条件）
- **7天平均气温 ≤ 19.614℃**（深度1节点，区分条件）
- **7天平均气温 16℃ 附近**（区分极端冷湿场景）

### 方案二：综合评分更高方案 (depth8_leaf1)

**规则1（覆盖样本=2，准确率=100%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 > 19.614 且 7天累积日照时数 ≤ 30.100 且 7天日均降雨量 > 0.743 且 7天累积降雨时数 > 23.000 且 7天平均相对湿度 > 86.571 且 7天平均气温 ≤ 25.371 且 7天平均气温 > 23.214

类别分布: {3: 2}

**规则2-7（覆盖样本各=1，准确率=100%）**：

共7条规则，覆盖7个3级样本，准确率均为100%，规则条件较复杂，涉及多个特征的精细划分。

**最优规则**: 规则1（samples=2，准确率=1.000，score=2.00）

**关键气象条件**:
- **7天日均降雨量 > 0.743mm**（根节点，核心条件）
- **7天平均气温**（深度1节点，区分条件，阈值19.614℃）
- **7天累积日照时数**（区分条件，阈值30.1小时）
- **7天累积降雨时数**（区分条件，阈值23.0小时）
- **7天平均相对湿度**（区分条件，阈值86.571%）

### 方案三：验证准确率更高方案 (depth3_leaf1)

**规则1（覆盖样本=3，准确率=100%）**：

条件: 7天日均降雨量 > 0.000 且 7天平均气温 ≤ 19.614 且 7天日均降雨量 > 2.771

类别分布: {3: 3}

**最优规则**: 规则1（samples=3，准确率=1.000，score=3.00）

**关键气象条件**:
- **7天日均降雨量 > 2.771mm**（根节点，核心条件）
- **7天平均气温 ≤ 19.614℃**（深度1节点，区分条件）

### 3级预警规则总结

| 方案 | 规则数 | 最优规则准确率 | 最优规则覆盖样本 | 使用的关键特征 |
|------|--------|---------------|-----------------|---------------|
| 方案一 (depth4_leaf1) | 2 | 100% | 2 | 7天日均降雨量、7天平均气温 |
| 方案二 (depth8_leaf1) | 7 | 100% | 2 | 7天日均降雨量、7天平均气温、7天累积日照时数、7天累积降雨时数、7天平均相对湿度 |
| 方案三 (depth3_leaf1) | 1 | 100% | 3 | 7天日均降雨量、7天平均气温 |

**核心条件**: 方案一和方案三的最优规则显示，当 7天日均降雨量 > 2.771mm 且 7天平均气温 ≤ 19.614℃ 时，最容易触发重度预警。

**解读**: 
- **方案一**：规则简洁，聚焦"大雨+低温"，利于现场判断。
- **方案二**：通过更多阈值组合识别不同的重度场景，适合分析需要精细分支的应用。
- **方案三**：规则最简洁，仅使用根节点和深度1节点的两个特征，覆盖3个3级样本，准确率100%。

## 气象预报预警等级判断流程（基于 depth4_leaf1 方案）

**说明**：以下流程基于 depth4_leaf1 平衡方案，规则简洁、易落地。如需更详细的判断条件（如考虑雨时长、相对湿度等），可参考 depth8_leaf1 方案的详细规则（见"气象因子阈值汇总表"中的 depth8_leaf1 详细阈值）。

### 第一步：筛出重度的极端场景

当满足以下条件时，即可直接发布 **3级（重度）** 预警：
- **极端冷湿型**：7天日均降雨量 > 2.771mm 且 7天平均气温 ≤ 19.614℃

### 第二步：判定中度（2级）区域

若未触发上述重度条件，且：
- **7天日均降雨量 > 0.743mm**
- **7天平均气温 > 19.614℃**
- **7天累积日照时数 ≤ 30.1小时**

则发布 **2级（中度）** 预警。

### 第三步：识别轻度（1级）场景

若仍未满足前述条件，可从 depth4_leaf1 的规则中抽取典型轻度情形：
- **小雨高温型**：7天日均降雨量 > 0mm 且 ≤ 0.743mm 且 7天平均气温 > 19.614℃ 且 7天累积日照时数 ≤ 30.1小时
- **小雨低温型**：7天日均降雨量 > 0mm 且 ≤ 2.771mm 且 7天平均气温 ≤ 19.614℃

满足其一即可发布 **1级（轻度）** 预警；其余组合可继续人工判读或结合其他方案。

### 判断流程图

```
开始
  ↓
【第一关】7天日均降雨量 > 0mm ?
  ├─ 否 → 继续观察
  └─ 是 →
        ↓
  【第二关】7天日均降雨量 > 2.771mm 且 7天平均气温 ≤ 19.614℃ ?
        ├─ 是 → 【3级（重度）】✓
        └─ 否 →
              ↓
    【第三关】7天日均降雨量 > 0.743mm 且 7天平均气温 > 19.614℃ 且 7天累积日照时数 ≤ 30.1小时 ?
              ├─ 是 → 【2级（中度）】✓
              └─ 否 →
                    ↓
        【第四关】7天日均降雨量 ≤ 0.743mm 且 7天平均气温 > 19.614℃ 且 7天累积日照时数 ≤ 30.1小时 ?
                    ├─ 是 → 【1级（轻度）】✓
                    └─ 否 →
                          ↓
        【第五关】7天日均降雨量 ≤ 2.771mm 且 7天平均气温 ≤ 19.614℃ ?
                          ├─ 是 → 【1级（轻度）】✓
                          └─ 否 → 继续观察
```

## 气象因子阈值汇总表

| 预警等级 | 7天日均降雨量 (mm) | 7天平均气温 (℃) | 7天累积日照时数 (小时) | 7天累积降雨时数 (小时) | 7天平均相对湿度 (%) | 说明/触发提示 |
|---------|-----------------|----------------|---------------------|---------------------|-------------------|----------------|
| 3级（重度） | > 2.771（极端冷湿）或 > 0.743（其他类型） | ≤ 19.614（极端冷湿）或 > 19.614（其他类型） | ≤ 30.1（雨时长+高湿）或 > 30.1（高日照+高湿） | > 18 或 > 23（雨时长型） | > 83.857 或 > 86.571（高湿型） | 五类触发：极端冷湿；雨时长+高湿；雨时长+高湿+中温；高湿+高温；高日照+高湿 |
| 2级（中度） | > 0.743 | > 19.614 | ≤ 30.1 | ≤ 18（短雨时）或 > 18 且 ≤ 23（中雨时）或 > 23（长雨时但湿度较低） | ≤ 86.571（一般）或 > 86.571（高湿但温度较高） | 有明显降雨且温度适中、日照适中，根据雨时和湿度细分 |
| 1级（轻度） | 0 < 雨量 ≤ 0.743（高温型）或 ≤ 2.771（低温型） | > 19.614（高温型）或 ≤ 19.614（低温型） | ≤ 30.1（高温型）或 > 30.1（高日照型）或 不限（低温型） | 不限 | 不限 | 两类场景：小雨高温 / 小雨低温 |

### 3级（重度）触发情景

#### 来自 depth4_leaf1（平衡方案）

| 场景 | 7天日均降雨量 (mm) | 7天平均气温 (℃) | 其他特征 | 说明 |
|------|-----------------|----------------|----------|------|
| 极端冷湿型 | > 2.771 | ≤ 19.614 | 日照/雨时不限 | 大雨 + 低温，易形成重度风险 |

#### 来自 depth8_leaf1（综合评分更高方案）

| 场景 | 7天日均降雨量 (mm) | 7天平均气温 (℃) | 7天累积日照时数 (小时) | 7天累积降雨时数 (小时) | 7天平均相对湿度 (%) | 说明 |
|------|-----------------|----------------|---------------------|---------------------|-------------------|------|
| 极端冷湿型 | > 2.771 | ≤ 19.614 | 不限 | 不限 | 不限 | 大雨 + 低温，易形成重度风险 |
| 雨时长+高湿型 | > 0.743 | > 19.614 | ≤ 30.1 | > 18 且 ≤ 23 | > 86.571 | 长时间降雨且湿度很高 |
| 雨时长+高湿+中温型 | > 0.743 | > 19.614 且 ≤ 25.371 | ≤ 30.1 | > 23 | > 86.571 | 长时间降雨、高湿且温度适中 |
| 高湿+高温型 | > 0.743 | > 25.371 且 > 26.600 | ≤ 30.1 | > 23 | > 86.571 | 高温高湿多雨 |
| 高日照+高湿型 | > 0.743 | > 19.614 | > 30.1 且 > 32.9 | 不限 | > 83.857 | 高日照但湿度很高 |

### 2级（中度）条件

#### 来自 depth4_leaf1（平衡方案）

| 条件组合 | 7天日均降雨量 (mm) | 7天平均气温 (℃) | 7天累积日照时数 (小时) | 其他特征 | 说明 |
|----------|-----------------|----------------|---------------------|----------|------|
| 中雨中照型 | > 0.743 | > 19.614 | ≤ 30.1 | 雨时不限 | 有明显降雨但温度适中、日照适中 |

#### 来自 depth8_leaf1（综合评分更高方案）

| 条件组合 | 7天日均降雨量 (mm) | 7天平均气温 (℃) | 7天累积日照时数 (小时) | 7天累积降雨时数 (小时) | 7天平均相对湿度 (%) | 说明 |
|----------|-----------------|----------------|---------------------|---------------------|-------------------|------|
| 中雨中照+短雨时型 | > 0.743 | > 19.614 且 > 20.143 | ≤ 30.1 | ≤ 18 | 不限 | 有明显降雨但雨时较短、温度适中 |
| 中雨中照+中雨时型 | > 0.743 | > 19.614 | ≤ 30.1 | > 18 且 ≤ 23 | 不限 | 有明显降雨但雨时中等、温度适中 |
| 中雨中照+高湿型 | > 0.743 | > 19.614 且 > 25.371 | ≤ 30.1 | > 23 | ≤ 86.571 | 有明显降雨但湿度较高、温度较高 |

### 1级（轻度）条件

| 场景 | 7天日均降雨量 (mm) | 7天平均气温 (℃) | 7天累积日照时数 (小时) | 说明 |
|------|-----------------|----------------|---------------------|------|
| 小雨高温型 | 0 < 雨量 ≤ 0.743 | > 19.614 | ≤ 30.1 | 温度较高但仅有小雨，易形成轻度风险 |
| 小雨低温型 | 0 < 雨量 ≤ 2.771 | ≤ 19.614 | 不限 | 温度较低但雨量不大，易形成轻度风险 |

**核心特征**: **7天日均降雨量**作为所有判断的第一个条件（根节点）。这是强制指定的根节点，用于实现以降雨量为第一划分条件的决策树结构。深度1强制使用**7天平均气温**作为区分节点，其他子节点使用所有特征（包括7天平均相对湿度、7天累计降雨时数、7天累计日照时数等）进行详细划分。

**注意**: 本批次实验使用**7天日均降雨量**作为根节点（而非7天平均气温），日均降雨量 = 7天累积雨量 / 7，更能反映平均降雨强度。所有方案均强制使用**7天日均降雨量**作为根节点，深度1强制使用**7天平均气温**作为区分节点，其他子节点使用所有特征进行详细划分。

## 关联强度（GRA 分数，值越大关联越强）

### 1级（轻度）预警关联强度

#### 主要关联因子（GRA分数 > 0.5）

| 因子 | GRA分数 | Pearson相关系数 | 说明 |
|------|---------|----------------|------|
| 7天平均相对湿度 | 0.658 | -0.309 | 负相关（湿度越低越易发生） |
| 7天累积降雨时数 | 0.609 | -0.136 | 弱负相关 |
| 7天日均降雨量 | 0.645 | -0.030 | 弱负相关 |
| 7天累积日照时数 | 0.594 | 0.260 | 正相关（日照越多越易发生） |
| 7天平均气温 | 0.517 | 0.042 | 弱正相关 |

**解读**: 1级预警与相对湿度呈负相关（湿度越低，轻度预警越易发生），与日照时数呈正相关（日照越多，轻度预警越易发生），与降雨时数和日均降雨量呈弱负相关。

### 2级（中度）预警关联强度

#### 主要关联因子（GRA分数 > 0.5）

| 因子 | GRA分数 | Pearson相关系数 | 说明 |
|------|---------|----------------|------|
| 7天日均降雨量 | 0.648 | 0.084 | 弱正相关 |
| 7天累积日照时数 | 0.562 | -0.167 | 负相关（日照少更易发生） |
| 7天平均相对湿度 | 0.527 | 0.133 | 弱正相关 |
| 7天累积降雨时数 | 0.609 | -0.019 | 弱负相关 |
| 7天平均气温 | 0.519 | -0.002 | 弱负相关 |

**解读**: 2级预警与日均降雨量关联较强（GRA=0.648），与日照时数呈负相关（日照少，中度预警越易发生），与相对湿度呈弱正相关。

### 3级（重度）预警关联强度

#### 主要关联因子（GRA分数 > 0.6）

| 因子 | GRA分数 | Pearson相关系数 | 说明 |
|------|---------|----------------|------|
| 7天累积降雨时数 | 0.671 | 0.607 | 强正相关（降雨时数越多越易发生） |
| 7天日均降雨量 | 0.721 | 0.365 | 强正相关（日均降雨量越多越易发生） |
| 7天累积日照时数 | 0.642 | -0.415 | 强负相关（日照少更易发生） |
| 7天平均相对湿度 | 0.537 | 0.495 | 正相关（湿度越高越易发生） |
| 7天平均气温 | 0.626 | -0.250 | 负相关（气温越低越易发生） |

**解读**: 3级预警与累积降雨时数（Pearson=0.607）和日均降雨量（Pearson=0.365）呈强正相关（降雨越多，重度预警越易发生），与日照时数呈强负相关（Pearson=-0.415，日照越少，重度预警越易发生），与平均相对湿度呈正相关（Pearson=0.495）。

## 方法概述

**预警等级来源**：

- 直接使用数据文件中的'预警'列，排除'未定义'的样本
- 预警等级：0级（不发生）、1级（轻度）、2级（中度）、3级（重度）

**特征选择**：只使用7天的以下特征：

- 7天平均气温
- 7天日均降雨量
- 7天平均相对湿度
- 7天累积降雨时数
- 7天累积日照时数

**皮尔逊相关（点二列相关）**：对每个预警等级（1,2,3）分别进行二分类分析，衡量特征与该预警等级的相关强度。

**灰色关联分析 GRA（分辨系数 ρ=0.5）**：衡量特征与目标序列"形状接近度"，对非线性/不同量纲更稳健。

**决策树多分类**：使用预警等级（0-3级）作为目标变量，从7天特征中提取每个预警等级的阈值组合规则。训练时保留0-3级全部样本，但展示时仅输出1-3级（轻/中/重）预警规则。**强制使用'7天日均降雨量'作为根节点（第一个判断条件），深度1强制使用'7天平均气温'作为区分节点**，其他子节点使用所有特征进行详细划分。

**样本筛选**：仅保留预警列中有效的预警等级（0-3级），排除"未定义"和无法识别的数据，确保训练数据质量。

**验证策略**：≤2024年样本作为训练集（44条），2025年13条样本留作独立验证集，专注轻/中/重预测。

## 三种方案参数对比

| 方案 | max_depth | min_samples_leaf | 特点 |
|------|-----------|------------------|------|
| 方案一 | 4 | 1 | 平衡方案，训练准确率74.3%，验证准确率69.2%，综合评分26.00，覆盖35个样本，规则总数6条（1级3条，2级1条，3级2条），各项指标均衡，规则简洁，适合实际应用 |
| 方案二 | 8 | 1 | 综合评分更高方案，训练准确率100%，验证准确率46.2%，综合评分35.00，覆盖35个样本，规则总数25条（1级9条，2级9条，3级7条），规则最复杂、覆盖样本数最多，但验证准确率较低，可能存在过拟合风险 |
| 方案三 | 3 | 1 | 验证准确率更高方案，训练准确率60.0%，验证准确率69.2%，综合评分18.00，覆盖30个样本，规则总数3条（1级1条，2级1条，3级1条），规则最简洁，适合需要突出验证表现的场景 |

## 与 1119 方案对比

### 核心差异

| 对比项 | 1119 批次（强制7天平均气温根节点） | 1120 批次（强制7天日均降雨量根节点） |
|--------|----------------------|---------------------|
| 根节点特征 | 强制使用 **7天平均气温**（代码强制指定） | **7天日均降雨量**（代码强制指定，作为根节点） |
| 深度1节点 | 使用标准算法选择最佳特征 | **7天平均气温**（代码强制指定，作为深度1区分节点） |
| 核心阈值 | 平均气温 ≤ 28.029℃ + 日均降雨量 0.743mm + 累积日照时数 4.4小时 | 日均降雨量 0.743mm / 2.771mm + 平均气温 19.614℃ + 累积日照时数 30.1小时 |
| 预警等级来源 | 直接使用数据文件中的'预警'列（0-3级） | 直接使用数据文件中的'预警'列（0-3级） |
| 最优方案 | depth4_leaf1 (综合评分26.00) | depth4_leaf1 (综合评分26.00，平衡方案) |
| 最优准确率 | 76.5%（训练），61.5%（验证） | 74.3%（训练），69.2%（验证） |
| 最优覆盖样本 | 34个（平衡方案），35个（方案二），30个（方案三） | 35个（方案一和方案二），30个（方案三） |
| 验证准确率最高方案 | depth2_leaf10 (69.2%) | depth4_leaf1 和 depth3_leaf1 (69.2%) |
| 验证策略 | 2025年13条样本作为验证集 | 2025年13条样本作为验证集 |
| 样本筛选 | 严格筛选，仅保留有效数据 | 严格筛选，仅保留有效数据 |
| 使用特征数 | 3-5个特征 | 3-5个特征 |

### 优势分析

1. **验证集评估**：1120批次验证准确率最高69.2%（9/13，depth4_leaf1和depth3_leaf1），平衡方案 depth4_leaf1 验证准确率也达到69.2%（9/13），与1119批次相比验证准确率更高
2. **样本质量**：严格的样本筛选确保训练数据质量，仅保留预警列中有效的预警等级（0-3级）
3. **根节点强制指定**：7天日均降雨量作为根节点是强制指定的，用于实现以降雨量为第一划分条件的决策树结构。深度1强制使用7天平均气温作为区分节点，其他子节点使用所有特征进行详细划分，满足业务对详细条件拆解的要求
4. **训练准确率适中**：平衡方案训练准确率74.3%，避免过拟合风险，同时保持69.2%的验证准确率，泛化能力良好
5. **特征精简**：使用3-5个特征，模型更易解释
6. **规则简洁性**：平衡方案规则总数6条（1级3条、2级1条、3级2条），覆盖35个样本，既保留了主要分支，又易于人工审核
7. **实验规模扩大**：从10个参数组合扩展到100个参数组合，更全面地探索了参数空间，找到了兼顾综合评分、验证准确率和覆盖度的多种方案
8. **平衡性能**：三种方案在训练准确率、验证准确率、综合评分和覆盖样本数之间形成互补，能够针对不同业务诉求进行选择
9. **方案多样性**：提供了平衡方案（depth4_leaf1）、综合评分更高方案（depth8_leaf1）与验证准确率更高方案（depth3_leaf1），满足不同应用场景需求

### 适用场景

- **需要验证模型泛化能力**：适合需要评估模型在新数据上表现的场景
- **数据质量要求高**：适合对训练数据质量有严格要求的场景
- **规则准确性优先**：适合需要高准确率规则的业务场景
- **使用原始预警列**：适合直接使用数据文件中已有预警等级的场景
- **特征精简需求**：适合需要精简特征集合的场景
- **以降雨量为第一判断条件**：适合业务上更关注降雨量作为首要判断因子的场景

## 参考文献

[1] 吕安瑞,严梦荧,张妍,等.基于土壤中霜疫霉活力变化防治荔枝霜疫病初探[C]//中国植物病理学会.中国植物病理学会2024年学术年会论文集.华南农业大学园艺学院华南农业大学植物保护学院;,2024:167.DOI:10.26914/c.cnkihy.2024.022408.

结果表明，荔枝霜疫霉可在果园土壤中存活16个月，成功越夏、越冬，成为荔枝霜疫病初侵染源；土壤中荔枝霜疫霉存在2个活跃期，第一个是冬末初春（12月中旬至次年开花前），此时土壤中荔枝霜疫霉活力逐渐增强，处于催醒状态，作为初侵染源具有侵染能力；第二个活跃期3月下旬至4月上中旬，为荔枝开花后至第二次生理落果期，此时土壤中复苏的荔枝霜疫霉在雨水的作用下，侵染落地花果，以多种生物学形态习居在土壤中；健康荔枝花果落地后染病快速，花落地后3h即可发病，24h后感染率超50％；幼果发病略慢，接触土壤45h感染率大于50％。落花和落果是土壤中霜疫霉初次侵染和再侵染的寄主，导致荔枝霜疫霉辗转传播侵染。

---

**报告生成时间**: 2025年11月20日  
**分析完成状态**: ✅ 全部完成（基于100个参数组合实验，强制使用7天日均降雨量作为根节点，深度1强制使用7天平均气温作为区分节点）  
**核心特征**: 直接使用数据文件中的'预警'列，使用7天特征集合，强制使用**7天日均降雨量**作为根节点（第一个判断条件），深度1强制使用**7天平均气温**作为区分节点，核心阈值为0.743mm/2.771mm（日均降雨量）、19.614℃（平均气温）和30.1小时（累积日照时数）  
**推荐方案**: 
- **方案一（推荐）**: depth4_leaf1（训练准确率74.3%，验证准确率69.2%，综合评分26.00，覆盖样本数35个，规则数量适中，平衡性能最佳）
- **方案二**: depth8_leaf1（训练准确率100%，覆盖样本数35个，综合评分最高35.00，适合需要大覆盖和高训练精度的场景）
- **方案三**: depth3_leaf1（验证准确率69.2%最高，覆盖样本数30个，规则最简洁，适合强调验证集表现的场景）
