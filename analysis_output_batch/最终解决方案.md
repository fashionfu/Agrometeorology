# Git ä¸­æ–‡æäº¤ä¿¡æ¯ä¹±ç  - æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

## âš ï¸ é‡è¦è¯´æ˜Ž

PowerShell æŽ§åˆ¶å°æ˜¾ç¤ºä¹±ç æ˜¯**æ­£å¸¸çš„**ï¼Œè¿™æ˜¯ PowerShell çš„æ˜¾ç¤ºç¼–ç é—®é¢˜ï¼Œ**ä¸å½±å“å®žé™…æäº¤åˆ° GitHub çš„å†…å®¹**ã€‚

## âœ… éªŒè¯æ–¹æ³•

**è¯·åœ¨ GitHub ç½‘é¡µä¸ŠæŸ¥çœ‹æäº¤ä¿¡æ¯**ï¼Œè¿™æ˜¯æœ€å‡†ç¡®çš„æ–¹æ³•ï¼š

1. è®¿é—®ï¼šhttps://github.com/fashionfu/Agrometeorology/commits/main
2. æŸ¥çœ‹æœ€æ–°çš„æäº¤ä¿¡æ¯
3. å¦‚æžœæ˜¾ç¤ºä¸ºï¼š`æ›´æ–°: æ¸…ç©ºå¹¶é‡æ–°ä¸Šä¼ LycheeFlowerFruitGrayMoldæ–‡ä»¶å¤¹å†…å®¹ (2025-11-06)`ï¼Œè¯´æ˜Žä¿®å¤æˆåŠŸï¼

## ðŸ”§ æŽ¨èè§£å†³æ–¹æ¡ˆï¼ˆä½¿ç”¨ Git Bashï¼‰

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨æä¾›çš„æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæœ€ç®€å•ï¼‰

1. åŒå‡»è¿è¡Œï¼š`fix_commit_using_gitbash.bat`
2. æŒ‰æç¤ºæ“ä½œ

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ä½¿ç”¨ Git Bash

1. æ‰“å¼€ **Git Bash**ï¼ˆä¸æ˜¯ PowerShellï¼‰
2. æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
cd /e/temp_agrometeo_repo

# è®¾ç½®ç¼–ç 
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8

# åˆ›å»ºæäº¤ä¿¡æ¯æ–‡ä»¶
cat > commit_msg.txt << 'EOF'
æ›´æ–°: æ¸…ç©ºå¹¶é‡æ–°ä¸Šä¼ LycheeFlowerFruitGrayMoldæ–‡ä»¶å¤¹å†…å®¹ (2025-11-06)
EOF

# ä¿®æ”¹æäº¤
git commit --amend -F commit_msg.txt

# æŸ¥çœ‹æäº¤ä¿¡æ¯ï¼ˆåº”è¯¥æ˜¾ç¤ºæ­£å¸¸ï¼‰
git log -1 --pretty=format:"%s"

# æŽ¨é€
git push origin main --force

# æ¸…ç†
rm commit_msg.txt
```

### æ–¹æ³•ä¸‰ï¼šåœ¨ Git Bash ä¸­é…ç½®æ°¸ä¹…ç¼–ç 

åœ¨ Git Bash çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼ˆ`~/.bashrc` æˆ– `~/.bash_profile`ï¼‰ï¼š

```bash
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
export LESSCHARSET=utf-8
```

ç„¶åŽé‡å¯ Git Bashã€‚

## ðŸ“‹ ä¸ºä»€ä¹ˆ PowerShell æ˜¾ç¤ºä¹±ç ï¼Ÿ

- PowerShell é»˜è®¤ä½¿ç”¨ GBK ç¼–ç æ˜¾ç¤ºï¼Œä½† Git æäº¤ä¿¡æ¯å·²ä½¿ç”¨ UTF-8 ä¿å­˜
- è¿™æ˜¯**æ˜¾ç¤ºé—®é¢˜**ï¼Œä¸å½±å“å®žé™…å†…å®¹
- GitHub ç½‘é¡µæ˜¾ç¤ºæ˜¯å‡†ç¡®çš„ï¼Œä»¥ GitHub ä¸ºå‡†

## ðŸŽ¯ ä»¥åŽæäº¤æ—¶çš„å»ºè®®

### æŽ¨èï¼šä½¿ç”¨ Git Bash

```bash
# åœ¨ Git Bash ä¸­
git add .
git commit -m "ä½ çš„ä¸­æ–‡æäº¤ä¿¡æ¯"
git push
```

### å¦‚æžœå¿…é¡»ä½¿ç”¨ PowerShell

1. è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼š
```powershell
$env:LANG="zh_CN.UTF-8"
$env:LC_ALL="zh_CN.UTF-8"
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
```

2. ä½¿ç”¨æ–‡ä»¶æ–¹å¼æäº¤ï¼š
```powershell
# åˆ›å»º UTF-8 æ–‡ä»¶ï¼ˆæ—  BOMï¼‰
$msg = "ä½ çš„ä¸­æ–‡æäº¤ä¿¡æ¯"
[System.IO.File]::WriteAllText("commit_msg.txt", $msg, [System.Text.UTF8Encoding]::new($false))
git commit -F commit_msg.txt
Remove-Item commit_msg.txt
```

## âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•

- [ ] è®¿é—® GitHub ç½‘é¡µæŸ¥çœ‹æäº¤ä¿¡æ¯æ˜¯å¦æ­£å¸¸
- [ ] å¦‚æžœ GitHub æ˜¾ç¤ºæ­£å¸¸ï¼Œè¯´æ˜Žä¿®å¤æˆåŠŸï¼ˆPowerShell ä¹±ç å¯ä»¥å¿½ç•¥ï¼‰
- [ ] ä»¥åŽä½¿ç”¨ Git Bash è¿›è¡Œæäº¤æ“ä½œï¼ˆæŽ¨èï¼‰

## ðŸ“ž å¦‚æžœ GitHub ä¸Šä»ç„¶ä¹±ç 

1. ä½¿ç”¨ Git Bash é‡æ–°æ‰§è¡Œä¿®å¤
2. ç¡®ä¿ä½¿ç”¨æ–‡ä»¶æ–¹å¼ï¼ˆ`-F` å‚æ•°ï¼‰è€Œä¸æ˜¯ `-m` å‚æ•°
3. æ£€æŸ¥ Git é…ç½®ï¼š
   ```bash
   git config --global i18n.commitencoding utf-8
   git config --global i18n.logoutputencoding utf-8
   ```

## ðŸ”— ç›¸å…³æ–‡ä»¶

- `fix_commit_using_gitbash.bat` - Windows æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæŽ¨èï¼‰
- `fix_commit_with_gitbash.sh` - Git Bash è„šæœ¬
- `fix_commit_with_file.ps1` - PowerShell è„šæœ¬ï¼ˆä½¿ç”¨æ–‡ä»¶æ–¹å¼ï¼‰
- `README_GIT_ENCODING.md` - è¯¦ç»†è¯´æ˜Žæ–‡æ¡£

